<!DOCTYPE html>
<html lang="en" class="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="View and manage your cart at ZentroMall." />
  <title>Cart â€“ ZentroMall</title>
  <link rel="icon" href="logo.png" />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-white min-h-screen">
  <header role="banner" class="bg-indigo-800 dark:bg-indigo-950 shadow-xl sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 py-4 flex justify-between items-center">
      <a href="index.html"><img src="logo.png" alt="ZentroMall Logo" class="h-14 rounded-lg" /></a>
      <a href="checkout.html" class="bg-yellow-500 text-black px-8 py-4 rounded-full text-xl font-bold" aria-label="Proceed to Checkout">Checkout â†’</a>
    </div>
  </header>

  <div class="max-w-4xl mx-auto px-4 py-16">
    <h1 class="text-5xl font-bold text-center mb-12">Your Cart</h1>
    <div id="cart-items"></div>
    <div class="mt-8">
      <div class="flex gap-2">
        <input type="text" id="coupon" placeholder="Enter Coupon Code (e.g., ZENTRO50)" class="flex-1 p-3 rounded-l border" aria-label="Coupon code" />
        <button onclick="applyCoupon()" class="bg-green-600 text-white px-6 py-3 rounded-r" aria-label="Apply coupon">Apply</button>
      </div>
      <p id="coupon-msg" class="text-green-600 mt-2"></p>
    </div>
    <div class="text-right text-4xl font-bold mt-10">Total: â‚¹<span id="total">0</span></div>
  </div>

  <script src="main.js"></script>
  <script>
    function renderCart() {
      const itemsDiv = document.getElementById("cart-items");
      let total = 0;
      itemsDiv.innerHTML = cart.map(item => {
        const p = products.find(x => x.id === item.id);
        total += p.price * item.qty;
        return `
          <div class="bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-xl mb-6 flex items-center justify-between">
            <img src="${p.image}" alt="${p.name}" class="w-24 h-24 object-cover rounded" />
            <div class="flex-1 mx-6">
              <h3 class="text-2xl font-bold">${p.name}</h3>
              <p class="text-gray-600 dark:text-gray-300">â‚¹${p.price.toLocaleString()} Ã— ${item.qty}</p>
            </div>
            <div class="flex items-center gap-4">
              <button onclick="changeQty(${p.id}, -1)" class="bg-gray-600 text-white w-10 h-10 rounded-full" aria-label="Decrease quantity">-</button>
              <span class="text-2xl">${item.qty}</span>
              <button onclick="changeQty(${p.id}, 1)" class="bg-indigo-600 text-white w-10 h-10 rounded-full" aria-label="Increase quantity">+</button>
              <button onclick="removeFromCart(${p.id})" class="bg-red-600 text-white px-6 py-3 rounded ml-4" aria-label="Remove item">Remove</button>
            </div>
          </div>`;
      }).join("") || "<p class='text-center text-3xl'>Cart is empty</p>";
      document.getElementById("total").textContent = total.toLocaleString();
      localStorage.setItem("zm_cart_total", total);
    }
    function changeQty(id, delta) {
      const item = cart.find(x => x.id === id);
      if (item) {
        item.qty += delta;
        if (item.qty <= 0) removeFromCart(id);
        else { saveData(); renderCart(); updateCartCount(); }
      }
    }
    function removeFromCart(id) {
      cart = cart.filter(x => x.id !== id);
      saveData(); renderCart(); updateCartCount();
    }
    function applyCoupon() {
      const code = document.getElementById("coupon").value;
      let total = parseInt(localStorage.getItem("zm_cart_total") || 0);
      if (code === "ZENTRO50" && total > 0) {
        total = total * 0.5;
        document.getElementById("coupon-msg").textContent = "ðŸŽ‰ 50% OFF applied!";
      } else document.getElementById("coupon-msg").textContent = "Invalid coupon";
      document.getElementById("total").textContent = total.toLocaleString();
    }
    renderCart(); updateCartCount();
  </script>
</body>
</html>
